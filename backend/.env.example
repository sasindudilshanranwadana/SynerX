# ===========================================
# SynerX Backend Environment Configuration
# ===========================================
# Copy this file to .env and fill in your actual values
# Never commit the .env file to version control!

# ===========================================
# Supabase Configuration
# ===========================================
# Get these from your Supabase project dashboard:
# 1. Go to https://supabase.com/dashboard
# 2. Select your project
# 3. Go to Settings > API
# 4. Copy the Project URL and anon/public key

SUPABASE_URL=your_supabase_project_url_here
SUPABASE_KEY=your_supabase_anon_key_here

# Supabase Auth Credentials (for admin operations)
# Create a user account in your Supabase Auth dashboard (for testing purposes)
SUPABASE_EMAIL=your_email@example.com
SUPABASE_PASSWORD=your_password_here

# ===========================================
# Weather API Configuration
# ===========================================
# Get your API key from OpenWeatherMap:
# 1. Sign up at https://openweathermap.org/api
# 2. Go to API keys section
# 3. Copy your API key

WEATHER_API_KEY=your_openweathermap_api_key_here

# ===========================================
# Cloudflare R2 Storage Configuration
# ===========================================
# Get these from Cloudflare R2:
# 1. Go to https://dash.cloudflare.com
# 2. Navigate to R2 Object Storage
# 3. Create a bucket
# 4. Go to Manage R2 API tokens
# 5. Create a new API token with R2 permissions

CLOUDFLARE_ACCOUNT_ID=your_cloudflare_account_id_here
R2_ACCESS_KEY_ID=your_r2_access_key_id_here
R2_SECRET_ACCESS_KEY=your_r2_secret_access_key_here
R2_BUCKET_NAME=your_r2_bucket_name_here

# ===========================================
# Detection Zone Configuration (REQUIRED)
# ===========================================
# Polygon coordinates as comma-separated values: x1,y1,x2,y2,x3,y3,x4,y4
# These are REQUIRED - the application will fail to start if these are not set
# Source polygon: Detection area polygon coordinates
SOURCE_POLYGON=422,10,594,16,801,665,535,649
# Stop zone polygon: Stop zone polygon coordinates
STOP_ZONE_POLYGON=507,199,681,209,751,555,484,541

# ===========================================
# Detection Thresholds Configuration
# ===========================================
# Target dimensions for perspective transformation
TARGET_WIDTH=50
TARGET_HEIGHT=130
# Minimum confidence threshold for object detection (Range: 0.0-1.0)
DETECTION_CONFIDENCE=0.25
# Non-Maximum Suppression threshold to remove duplicate detections (Range: 0.0-1.0)
NMS_THRESHOLD=0.3
# Threshold to determine if vehicle is stationary in pixels/frame (Range: 0.1-2.0)
VELOCITY_THRESHOLD=0.6
# Number of frames to buffer for velocity calculation
FRAME_BUFFER=5
# IoU threshold for merging overlapping detections (Range: 0.3-0.8)
DETECTION_OVERLAP_THRESHOLD=0.5
# Confidence threshold for stable class assignment (Range: 0.0-1.0)
CLASS_CONFIDENCE_THRESHOLD=0.5
# Number of frames to track for class consistency (Range: 3-20)
CLASS_HISTORY_FRAMES=10

# ===========================================
# Video Processing Configuration
# ===========================================
# Target FPS for smooth playback
TARGET_FPS=30
# Interval (in frames) to update FPS display (Range: 10-100)
FPS_UPDATE_INTERVAL=30
# Skip every N frames during processing (2 = process every 2nd frame)
PROCESSING_FRAME_SKIP=2

# ===========================================
# Visual Settings Configuration
# ===========================================
# Thickness of bounding box lines (Range: 1-5)
ANNOTATION_THICKNESS=1
# Scale factor for text labels (Range: 0.3-1.0)
TEXT_SCALE=0.4
# Thickness of text labels (Range: 1-3)
TEXT_THICKNESS=1
# Length of tracking traces in seconds (Range: 1-10)
TRACE_LENGTH_SECONDS=2
# Stop zone outline color in BGR format (comma-separated: B,G,R)
STOP_ZONE_COLOR=0,255,255
# Thickness of stop zone outline (Range: 1-5)
STOP_ZONE_LINE_THICKNESS=2
# Vertical offset for anchor points in pixels (Range: -20 to 20)
ANCHOR_Y_OFFSET=0
# Whether to display anchor points on vehicles (true/false)
SHOW_ANCHOR_POINTS=true
# Anchor point color in BGR format (comma-separated: B,G,R)
ANCHOR_POINT_COLOR=255,0,255
# Radius of anchor point circles (Range: 2-10)
ANCHOR_POINT_RADIUS=5
# Thickness of anchor point circles (-1 for filled, 1-3 for outline)
ANCHOR_POINT_THICKNESS=-1

# ===========================================
# Display Settings Configuration
# ===========================================
# Maximum width for display window (resize if larger)
MAX_DISPLAY_WIDTH=1280
# Skip every N frames for better performance (1 = no skip, 2 = skip every other frame)
DISPLAY_FRAME_SKIP=1
# Delay in milliseconds for cv2.waitKey() (1 = responsive, 0 = fastest)
DISPLAY_WAIT_KEY_DELAY=1

# ===========================================
# Location Coordinates for Weather Data
# ===========================================
# Camera location coordinates for weather data collection
LOCATION_LAT=-37.740585
LOCATION_LON=144.731637

# ===========================================
# WebSocket Streaming Configuration
# ===========================================
# Send every Nth frame for balanced smoothness
STREAMING_FRAME_SKIP=2
# JPEG quality for streaming (Range: 1-100, higher = better quality)
STREAMING_JPEG_QUALITY=85
# Maximum frame size for streaming (comma-separated: width,height)
STREAMING_MAX_FRAME_SIZE=1280,720
# Queue size for streaming buffer
STREAMING_QUEUE_SIZE=4
# Number of workers for streaming processing
STREAMING_WORKERS=4
# Target FPS for smooth playback
STREAMING_TARGET_FPS=30
